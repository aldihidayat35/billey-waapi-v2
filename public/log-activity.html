<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activity Log | WhatsApp Multi-Session Dashboard</title>
    <link rel="shortcut icon" href="assets/media/logos/favicon.ico" />
    
    <!-- Metronic 8 Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700" />
    
    <!-- Metronic 8 Global Plugins Bundle -->
    <link href="assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
    
    <!-- Metronic 8 Global Styles Bundle -->
    <link href="assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
    
    <!-- Custom Styles for Log Activity -->
    <style>
        .log-item {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .log-item:hover {
            background-color: #f5f8fa;
            border-left-color: #009ef7;
            transform: translateX(5px);
        }
        .log-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        .log-type-message { background-color: #e8f4f8; color: #009ef7; }
        .log-type-session { background-color: #e8fff3; color: #50cd89; }
        .log-type-error { background-color: #fff5f8; color: #f1416c; }
        .log-type-system { background-color: #fff8dd; color: #ffc700; }
        .log-type-api { background-color: #f8f5ff; color: #7239ea; }
        
        .filter-btn {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .filter-btn.active {
            border: 2px solid #009ef7 !important;
        }
        
        .stats-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .stats-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .log-container {
            max-height: 800px;
            overflow-y: auto;
        }
        
        .badge-pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .timeline-line {
            position: absolute;
            left: 20px;
            top: 50px;
            bottom: 0;
            width: 2px;
            background: #e4e6ef;
        }
        
        .export-btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body id="kt_app_body" data-kt-app-layout="dark-sidebar" data-kt-app-header-fixed="true" data-kt-app-sidebar-enabled="true" data-kt-app-sidebar-fixed="true" data-kt-app-sidebar-hoverable="true" data-kt-app-sidebar-push-header="true" data-kt-app-sidebar-push-toolbar="true" data-kt-app-sidebar-push-footer="true" data-kt-app-toolbar-enabled="true" class="app-default">
    
    <!--begin::App-->
    <div class="d-flex flex-column flex-root app-root" id="kt_app_root">
        <!--begin::Page-->
        <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
            
            <!-- Header Component akan dimuat di sini -->
            <div id="header-container"></div>
            
            <!--begin::Wrapper - kt_app_wrapper-->
            <div class="app-wrapper flex-column flex-row-fluid" id="kt_app_wrapper">
                
                <!-- Sidebar Component akan dimuat di sini -->
                <div id="sidebar-container"></div>
                
                <!--begin::Main - kt_app_main-->
                <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
                    <!--begin::Content wrapper-->
                    <div class="d-flex flex-column flex-column-fluid">
                        
                        <!--begin::Toolbar - kt_app_toolbar-->
                        <div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
                            <div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
                                <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
                                    <h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">ðŸ“‹ Activity Log</h1>
                                    <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
                                        <li class="breadcrumb-item text-muted"><a href="index.html" class="text-muted text-hover-primary">Home</a></li>
                                        <li class="breadcrumb-item"><span class="bullet bg-gray-400 w-5px h-2px"></span></li>
                                        <li class="breadcrumb-item text-muted">Activity Log</li>
                                    </ul>
                                </div>
                                <div class="d-flex align-items-center gap-2 gap-lg-3">
                                    <button class="btn btn-sm btn-light-primary export-btn" id="export-logs-btn">
                                        <i class="bi bi-download"></i> Export Log
                                    </button>
                                    <button class="btn btn-sm btn-light-danger" id="clear-logs-btn">
                                        <i class="bi bi-trash"></i> Clear All
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!--end::Toolbar-->
                        
                        <!--begin::Content - kt_app_content-->
                        <div id="kt_app_content" class="app-content flex-column-fluid">
                            <div id="kt_app_content_container" class="app-container container-xxl">
                                
                                <!-- Row 1: Statistics Cards -->
                                <div class="row g-5 mb-5">
                                    <div class="col-xl-3 col-md-6">
                                        <div class="card card-flush stats-card h-100" data-filter="outgoing">
                                            <div class="card-body d-flex align-items-center py-5">
                                                <div class="d-flex flex-column flex-grow-1">
                                                    <span class="text-muted fw-semibold fs-7 mb-1">Pesan Keluar</span>
                                                    <span class="fw-bold fs-2x text-success" id="stat-messages">0</span>
                                                </div>
                                                <span class="svg-icon svg-icon-3x svg-icon-success">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                        <path d="M15.43 8.56949L10.744 15.1395C10.6422 15.282 10.5804 15.4492 10.5651 15.6236C10.5498 15.7981 10.5815 15.9734 10.657 16.1315L13.194 21.4425C13.2737 21.6097 13.3991 21.751 13.5557 21.8499C13.7123 21.9488 13.8938 22.0014 14.079 22.0015H14.117C14.3087 21.9941 14.4941 21.9307 14.6502 21.8191C14.8062 21.7075 14.9261 21.5526 14.995 21.3735L21.933 3.33649C22.0011 3.15918 22.0164 2.96594 21.977 2.78013C21.9376 2.59432 21.8452 2.4239 21.711 2.28949L15.43 8.56949Z" fill="currentColor"/>
                                                        <path opacity="0.3" d="M20.664 2.06648L2.62602 9.00148C2.44768 9.07085 2.29348 9.19082 2.1824 9.34663C2.07131 9.50244 2.00818 9.68731 2.00074 9.87853C1.99331 10.0697 2.04189 10.259 2.14054 10.4229C2.23919 10.5869 2.38359 10.7185 2.55601 10.8015L7.86601 13.3365C8.02383 13.4126 8.19925 13.4448 8.37382 13.4297C8.54839 13.4145 8.71565 13.3526 8.85801 13.2505L15.43 8.56548L21.711 2.28448C21.5762 2.15096 21.4055 2.05932 21.2198 2.02064C21.034 1.98196 20.8409 1.99788 20.664 2.06648Z" fill="currentColor"/>
                                                    </svg>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-3 col-md-6">
                                        <div class="card card-flush stats-card h-100" data-filter="incoming">
                                            <div class="card-body d-flex align-items-center py-5">
                                                <div class="d-flex flex-column flex-grow-1">
                                                    <span class="text-muted fw-semibold fs-7 mb-1">Pesan Masuk</span>
                                                    <span class="fw-bold fs-2x text-primary" id="stat-errors">0</span>
                                                </div>
                                                <span class="svg-icon svg-icon-3x svg-icon-primary">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                        <path d="M6 8.725C6 8.125 6.4 7.725 7 7.725H14L10.7 3.925C10.3 3.525 10.2 2.925 10.6 2.425C11 2.025 11.6 1.925 12.1 2.325L17.8 8.025C18.1 8.325 18.2 8.725 18.1 9.125C18 9.525 17.6 9.725 17.1 9.725H7C6.4 9.725 6 9.325 6 8.725Z" fill="currentColor"/>
                                                        <path opacity="0.3" d="M6 21.725V10.725H17V21.725C17 22.325 16.6 22.725 16 22.725H7C6.4 22.725 6 22.325 6 21.725Z" fill="currentColor"/>
                                                    </svg>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-3 col-md-6">
                                        <div class="card card-flush stats-card h-100" data-filter="session">
                                            <div class="card-body d-flex align-items-center py-5">
                                                <div class="d-flex flex-column flex-grow-1">
                                                    <span class="text-muted fw-semibold fs-7 mb-1">Session Aktif</span>
                                                    <span class="fw-bold fs-2x text-info" id="stat-sessions">0</span>
                                                </div>
                                                <span class="svg-icon svg-icon-3x svg-icon-info">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                        <path opacity="0.3" d="M21.25 18.525L13.05 21.825C12.35 22.125 11.65 22.125 10.95 21.825L2.75 18.525C1.75 18.125 1.75 16.725 2.75 16.325L4.04999 15.825L10.25 18.325C10.85 18.525 11.45 18.625 12.05 18.625C12.65 18.625 13.25 18.525 13.85 18.325L20.05 15.825L21.35 16.325C22.35 16.725 22.35 18.125 21.25 18.525Z" fill="currentColor"/>
                                                        <path d="M11.05 11.025L2.84998 7.725C1.84998 7.325 1.84998 5.925 2.84998 5.525L11.05 2.225C11.75 1.925 12.45 1.925 13.15 2.225L21.35 5.525C22.35 5.925 22.35 7.325 21.35 7.725L13.05 11.025C12.45 11.325 11.65 11.325 11.05 11.025Z" fill="currentColor"/>
                                                    </svg>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-3 col-md-6">
                                        <div class="card card-flush stats-card h-100" data-filter="all">
                                            <div class="card-body d-flex align-items-center py-5">
                                                <div class="d-flex flex-column flex-grow-1">
                                                    <span class="text-muted fw-semibold fs-7 mb-1">Total Pesan</span>
                                                    <span class="fw-bold fs-2x text-warning" id="stat-total">0</span>
                                                </div>
                                                <span class="svg-icon svg-icon-3x svg-icon-warning">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                        <rect x="2" y="2" width="9" height="9" rx="2" fill="currentColor"/>
                                                        <rect opacity="0.3" x="13" y="2" width="9" height="9" rx="2" fill="currentColor"/>
                                                        <rect opacity="0.3" x="13" y="13" width="9" height="9" rx="2" fill="currentColor"/>
                                                        <rect opacity="0.3" x="2" y="13" width="9" height="9" rx="2" fill="currentColor"/>
                                                    </svg>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Row 2: Filters -->
                                <div class="row g-5 mb-5">
                                    <div class="col-12">
                                        <div class="card card-flush">
                                            <div class="card-body py-5">
                                                <div class="row align-items-center">
                                                    <div class="col-md-4 mb-3 mb-md-0">
                                                        <label class="form-label fw-bold mb-3">Filter Berdasarkan Tipe:</label>
                                                        <div class="d-flex flex-wrap gap-2">
                                                            <button class="btn btn-sm btn-light-primary filter-btn active" data-filter="all">
                                                                <i class="bi bi-grid-fill"></i> Semua
                                                            </button>
                                                            <button class="btn btn-sm btn-light-success filter-btn" data-filter="outgoing">
                                                                <i class="bi bi-send-fill"></i> Keluar
                                                            </button>
                                                            <button class="btn btn-sm btn-light-info filter-btn" data-filter="incoming">
                                                                <i class="bi bi-inbox-fill"></i> Masuk
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3 mb-3 mb-md-0">
                                                        <label class="form-label fw-bold mb-3">Session:</label>
                                                        <select class="form-select form-select-solid form-select-sm" id="session-filter">
                                                            <option value="">Semua Session</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-2 mb-3 mb-md-0">
                                                        <label class="form-label fw-bold mb-3">Direction:</label>
                                                        <select class="form-select form-select-solid form-select-sm" id="direction-filter">
                                                            <option value="">Semua</option>
                                                            <option value="incoming">Masuk</option>
                                                            <option value="outgoing">Keluar</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label class="form-label fw-bold mb-3">Pencarian:</label>
                                                        <div class="input-group">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-search"></i>
                                                            </span>
                                                            <input type="text" class="form-control form-control-solid" id="search-input" placeholder="Cari nomor, konten...">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Row 3: Session Logs -->
                                <div class="row g-5 mb-5">
                                    <div class="col-12">
                                        <div class="card card-flush">
                                            <div class="card-header">
                                                <h3 class="card-title fw-bold">
                                                    <i class="bi bi-person-check-fill me-2"></i>Log Session Login/Logout
                                                </h3>
                                            </div>
                                            <div class="card-body">
                                                <div id="session-logs-section">
                                                    <p class="text-muted">Memuat log session...</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Row 4: Activity Log Timeline -->
                                <div class="row g-5">
                                    <div class="col-12">
                                        <div class="card card-flush">
                                            <div class="card-header">
                                                <h3 class="card-title fw-bold">
                                                    <i class="bi bi-clock-history me-2"></i>Riwayat Pesan
                                                    <span class="badge badge-light-primary ms-2 badge-pulse" id="live-indicator">
                                                        <i class="bi bi-circle-fill fs-8 me-1"></i>Live
                                                    </span>
                                                </h3>
                                                <div class="card-toolbar">
                                                    <select class="form-select form-select-sm form-select-solid w-150px" id="log-limit">
                                                        <option value="50">50 Terakhir</option>
                                                        <option value="100" selected>100 Terakhir</option>
                                                        <option value="200">200 Terakhir</option>
                                                        <option value="1000">1000 Terakhir</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="card-body position-relative">
                                                <div class="timeline-line"></div>
                                                <div class="log-container" id="log-container">
                                                    <!-- Logs will be inserted here -->
                                                    <div class="text-center py-10">
                                                        <span class="svg-icon svg-icon-5tx svg-icon-muted mb-5">
                                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                                <path opacity="0.3" d="M19 22H5C4.4 22 4 21.6 4 21V3C4 2.4 4.4 2 5 2H14L20 8V21C20 21.6 19.6 22 19 22Z" fill="currentColor"/>
                                                                <path d="M15 8H20L14 2V7C14 7.6 14.4 8 15 8Z" fill="currentColor"/>
                                                            </svg>
                                                        </span>
                                                        <p class="text-muted fw-semibold fs-5">Belum ada aktivitas. Sistem siap mencatat...</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            <!--end::Content container-->
                        </div>
                        <!--end::Content-->
                        
                    </div>
                    <!--end::Content wrapper-->
                    
                    <!-- Footer Component akan dimuat di sini -->
                    <div id="footer-container"></div>
                    
                </div>
                <!--end::Main-->
                
            </div>
            <!--end::Wrapper-->
            
        </div>
        <!--end::Page-->
    </div>
    <!--end::App-->
    
    <!-- Metronic 8 Global Javascript Bundle -->
    <script src="assets/plugins/global/plugins.bundle.js"></script>
    <script src="assets/js/scripts.bundle.js"></script>
    
    <!-- Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Log Activity Logic -->
    <script src="log-activity.js"></script>
    
</body>
</html>
