<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Home - WhatsApp Group Exporter</title>
    
    <!-- Metronic CSS -->
    <link href="/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/css/style.bundle.css" rel="stylesheet" type="text/css"/>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="/frontend/assets/css/frontend.css">
</head>
<body id="kt_app_body" data-kt-app-layout="dark-header" data-kt-app-header-fixed="true" class="app-default">
    
    <!--begin::Theme mode setup-->
    <script>
        var defaultThemeMode = "light";
        var themeMode;
        if (document.documentElement) {
            if (document.documentElement.hasAttribute("data-bs-theme-mode")) {
                themeMode = document.documentElement.getAttribute("data-bs-theme-mode");
            } else {
                themeMode = localStorage.getItem("data-bs-theme") !== null ? localStorage.getItem("data-bs-theme") : defaultThemeMode;
            }
            document.documentElement.setAttribute("data-bs-theme", themeMode);
        }
    </script>
    <!--end::Theme mode setup-->
    
    <!--begin::App-->
    <div class="d-flex flex-column flex-root app-root" id="kt_app_root">
        <!--begin::Page-->
        <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
            
            <!--begin::Header-->
            <div id="kt_app_header" class="app-header" style="background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);">
                <!--begin::Header container-->
                <div class="app-container container-fluid d-flex align-items-stretch justify-content-between">
                    <!--begin::Logo-->
                    <div class="d-flex align-items-center flex-grow-1 flex-lg-grow-0 me-lg-15">
                        <a href="#" class="d-flex align-items-center">
                            <div class="d-flex align-items-center justify-content-center bg-white bg-opacity-20 rounded-circle me-3" style="width: 40px; height: 40px;">
                                <i class="fab fa-whatsapp text-white fs-3"></i>
                            </div>
                            <span class="text-white fw-bold fs-5 d-none d-md-inline">WhatsApp Exporter</span>
                        </a>
                    </div>
                    <!--end::Logo-->
                    
                    <!--begin::User Info-->
                    <div class="d-flex align-items-center">
                        <div class="d-flex align-items-center me-3">
                            <span class="badge badge-light-success px-3 py-2">
                                <span class="bullet bullet-dot bg-success me-2 h-8px w-8px animation-blink"></span>
                                <span id="session-info" class="fs-7">Session: -</span>
                            </span>
                        </div>
                        <div class="d-flex align-items-center me-3">
                            <div class="symbol symbol-35px symbol-circle me-2">
                                <span class="symbol-label bg-white text-success fw-bold" id="user-avatar">U</span>
                            </div>
                            <span class="text-white fw-semibold d-none d-md-inline" id="welcome-name">User</span>
                        </div>
                        <!--begin::Logout Button-->
                        <button onclick="logout()" class="btn btn-sm btn-light-danger d-flex align-items-center" title="Logout">
                            <i class="fas fa-sign-out-alt me-1"></i>
                            <span class="d-none d-md-inline">Logout</span>
                        </button>
                        <!--end::Logout Button-->
                    </div>
                    <!--end::User Info-->
                </div>
                <!--end::Header container-->
            </div>
            <!--end::Header-->
            
            <!--begin::Wrapper-->
            <div class="app-wrapper flex-column flex-row-fluid" id="kt_app_wrapper">
                <!--begin::Main-->
                <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
                    <!--begin::Content wrapper-->
                    <div class="d-flex flex-column flex-column-fluid">
                        <!--begin::Content-->
                        <div id="kt_app_content" class="app-content flex-column-fluid">
                            <!--begin::Content container-->
                            <div class="app-container container-fluid py-5 py-lg-10">
                                
                                <!--begin::Processing Section-->
                                <section class="processing-section" id="processing-section">
                                    
                                    <!--begin::Processing Card-->
                                    <div class="card shadow-sm mb-5 mb-xl-10">
                                        <!--begin::Card header-->
                                        <div class="card-header border-0 pt-6" style="background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); border-radius: 0.625rem 0.625rem 0 0;">
                                            <h3 class="card-title align-items-start flex-column">
                                                <span class="card-label fw-bold fs-3 text-white">
                                                    <i class="fas fa-cog fa-spin me-2"></i>
                                                    Memproses Export
                                                </span>
                                            </h3>
                                        </div>
                                        <!--end::Card header-->
                                        
                                        <!--begin::Card body-->
                                        <div class="card-body py-5">
                                            
                                            <!--begin::Process Steps (Horizontal Scroll on Mobile)-->
                                            <div class="process-steps-wrapper mb-10">
                                                <div class="d-flex flex-nowrap overflow-auto pb-3">
                                                    <!--begin::Step 1-->
                                                    <div class="process-step flex-shrink-0 text-center px-3" data-step="1" style="min-width: 100px;">
                                                        <div class="symbol symbol-50px symbol-circle mb-3">
                                                            <span class="symbol-label bg-light-secondary">
                                                                <i class="fas fa-plug text-gray-500 fs-4"></i>
                                                            </span>
                                                        </div>
                                                        <div class="fs-7 fw-semibold text-gray-600">Verifikasi<br>Koneksi</div>
                                                    </div>
                                                    <!--end::Step 1-->
                                                    
                                                    <div class="d-flex align-items-center flex-shrink-0 px-2">
                                                        <div class="bg-gray-300" style="width: 30px; height: 2px;"></div>
                                                    </div>
                                                    
                                                    <!--begin::Step 2-->
                                                    <div class="process-step flex-shrink-0 text-center px-3" data-step="2" style="min-width: 100px;">
                                                        <div class="symbol symbol-50px symbol-circle mb-3">
                                                            <span class="symbol-label bg-light-secondary">
                                                                <i class="fas fa-users text-gray-500 fs-4"></i>
                                                            </span>
                                                        </div>
                                                        <div class="fs-7 fw-semibold text-gray-600">Ambil<br>Grup</div>
                                                    </div>
                                                    <!--end::Step 2-->
                                                    
                                                    <div class="d-flex align-items-center flex-shrink-0 px-2">
                                                        <div class="bg-gray-300" style="width: 30px; height: 2px;"></div>
                                                    </div>
                                                    
                                                    <!--begin::Step 3-->
                                                    <div class="process-step flex-shrink-0 text-center px-3" data-step="3" style="min-width: 100px;">
                                                        <div class="symbol symbol-50px symbol-circle mb-3">
                                                            <span class="symbol-label bg-light-secondary">
                                                                <i class="fas fa-calculator text-gray-500 fs-4"></i>
                                                            </span>
                                                        </div>
                                                        <div class="fs-7 fw-semibold text-gray-600">Hitung<br>Peserta</div>
                                                    </div>
                                                    <!--end::Step 3-->
                                                    
                                                    <div class="d-flex align-items-center flex-shrink-0 px-2">
                                                        <div class="bg-gray-300" style="width: 30px; height: 2px;"></div>
                                                    </div>
                                                    
                                                    <!--begin::Step 4-->
                                                    <div class="process-step flex-shrink-0 text-center px-3" data-step="4" style="min-width: 100px;">
                                                        <div class="symbol symbol-50px symbol-circle mb-3">
                                                            <span class="symbol-label bg-light-secondary">
                                                                <i class="fas fa-file-excel text-gray-500 fs-4"></i>
                                                            </span>
                                                        </div>
                                                        <div class="fs-7 fw-semibold text-gray-600">Buat<br>Excel</div>
                                                    </div>
                                                    <!--end::Step 4-->
                                                    
                                                    <div class="d-flex align-items-center flex-shrink-0 px-2">
                                                        <div class="bg-gray-300" style="width: 30px; height: 2px;"></div>
                                                    </div>
                                                    
                                                    <!--begin::Step 5-->
                                                    <div class="process-step flex-shrink-0 text-center px-3" data-step="5" style="min-width: 100px;">
                                                        <div class="symbol symbol-50px symbol-circle mb-3">
                                                            <span class="symbol-label bg-light-secondary">
                                                                <i class="fas fa-check text-gray-500 fs-4"></i>
                                                            </span>
                                                        </div>
                                                        <div class="fs-7 fw-semibold text-gray-600">Selesai</div>
                                                    </div>
                                                    <!--end::Step 5-->
                                                </div>
                                            </div>
                                            <!--end::Process Steps-->
                                            
                                            <!--begin::Progress Section-->
                                            <div class="mb-10">
                                                <div class="d-flex flex-stack flex-wrap mb-2">
                                                    <span class="fw-semibold text-gray-700 fs-6">Progress Export</span>
                                                    <span class="fw-bold text-success fs-4"><span id="progress-percent">0</span>%</span>
                                                </div>
                                                <div class="h-15px bg-light-success rounded overflow-hidden">
                                                    <div class="bg-success h-100 rounded progress-bar-animated progress-bar-striped" id="progress-bar" role="progressbar" style="width: 0%"></div>
                                                </div>
                                                <div id="progress-status" class="d-flex align-items-center mt-3 fs-7 text-gray-600">
                                                    <span class="spinner-border spinner-border-sm text-success me-2"></span>
                                                    Memulai proses...
                                                </div>
                                            </div>
                                            <!--end::Progress Section-->
                                            
                         
                                            
                                        </div>
                                        <!--end::Card body-->
                                    </div>
                                    <!--end::Processing Card-->
                                    
                                    <!--begin::Success Section-->
                                    <div class="success-section" id="success-section" style="display: none;">
                                        <div class="card shadow-sm">
                                            <div class="card-body py-10 py-lg-15 text-center">
                                                <!--begin::Success Icon-->
                                                <div class="mb-8">
                                                    <div class="symbol symbol-100px symbol-circle mb-5">
                                                        <span class="symbol-label bg-success pulse pulse-success">
                                                            <i class="fas fa-check text-white fs-2x"></i>
                                                            <span class="pulse-ring"></span>
                                                        </span>
                                                    </div>
                                                    <h1 class="text-success fw-bolder fs-2x mb-3">Export Berhasil!</h1>
                                                    <p class="text-gray-600 fs-5 mb-0">Semua data grup WhatsApp Anda berhasil di-export ke file Excel.</p>
                                                </div>
                                                <!--end::Success Icon-->
                                                
                                                <!--begin::Export Result Card-->
                                                <div class="card bg-light-success border border-success border-dashed mb-8 mx-auto" style="max-width: 500px;">
                                                    <div class="card-body d-flex align-items-center p-5">
                                                        <div class="symbol symbol-60px me-5">
                                                            <span class="symbol-label bg-success">
                                                                <i class="fas fa-file-excel text-white fs-2"></i>
                                                            </span>
                                                        </div>
                                                        <div class="text-start">
                                                            <h4 class="fw-bold text-gray-900 mb-1" id="export-filename">groups_export.xlsx</h4>
                                                            <span class="text-gray-600 fs-7" id="export-date">-</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--end::Export Result Card-->
                                                
                                                <!--begin::Actions-->
                                                <div class="d-flex flex-center flex-wrap gap-3">
                                                    <a href="#" id="download-btn" class="btn btn-success btn-lg px-8" download>
                                                        <i class="fas fa-download me-2"></i>
                                                        Download Excel
                                                    </a>
                                                    <button onclick="logout()" class="btn btn-light-danger btn-lg px-8">
                                                        <i class="fas fa-sign-out-alt me-2"></i>
                                                        Keluar
                                                    </button>
                                                </div>
                                                <!--end::Actions-->
                                            </div>
                                        </div>
                                    </div>
                                    <!--end::Success Section-->
                                    
                                </section>
                                <!--end::Processing Section-->
                                
                            </div>
                            <!--end::Content container-->
                        </div>
                        <!--end::Content-->
                    </div>
                    <!--end::Content wrapper-->
                    
                    <!--begin::Footer-->
                    <div id="kt_app_footer" class="app-footer">
                        <div class="app-container container-fluid d-flex flex-column flex-md-row flex-center flex-md-stack py-3">
                            <div class="text-gray-600 fw-semibold fs-7">
                                WhatsApp Group Exporter &copy; 2024 | <a href="/dashboard" class="text-primary">Admin Panel</a>
                            </div>
                        </div>
                    </div>
                    <!--end::Footer-->
                </div>
                <!--end::Main-->
            </div>
            <!--end::Wrapper-->
        </div>
        <!--end::Page-->
    </div>
    <!--end::App-->
    
    <!--begin::Metronic JS-->
    <script src="/assets/plugins/global/plugins.bundle.js"></script>
    <script src="/assets/js/scripts.bundle.js"></script>
    <!--end::Metronic JS-->
    
    <!--begin::Socket.IO & Custom JS-->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/frontend/assets/js/frontend.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initHomePage();
        });
    </script>
    <!--end::Custom JS-->
</body>
</html>
